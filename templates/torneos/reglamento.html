{% extends 'torneos/base.html' %}
{% load static %}

{% block title %}Reglamento - {{ categoria.nombre }}{% endblock %}

{% block categoria_content %}
<div class="card section-card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="m-0 text-navy"><i class="fa-solid fa-file-lines"></i> Reglamento</h3>
        <div>
            {% if torneo and torneo.logo %}
            <img src="{{ torneo.logo.url }}" alt="{{ torneo.nombre }}" style="height:44px; object-fit:contain;" class="me-2">
            {% endif %}
        </div>
    </div>
    <div class="card-body">
        {% if reglamento %}
            {% comment %}Intentar embeber PDF; si es otro tipo, mostrar enlace de descarga{% endcomment %}
            {% with url=reglamento.url %}
                <div class="mb-3">
                    <a href="{{ url }}" target="_blank" class="btn btn-outline-primary">
                        <i class="fa-solid fa-download me-2"></i> Abrir reglamento en nueva pestaña
                    </a>
                </div>
                <div style="width:100%; height:800px;">
                    <object data="{{ url }}" type="application/pdf" width="100%" height="100%">
                        <p>Tu navegador no puede mostrar el reglamento embebido. <a href="{{ url }}" target="_blank">Descargar / Abrir</a></p>
                    </object>
                </div>
            {% endwith %}
        {% else %}
            <div class="alert alert-warning">
                No se ha subido ningún reglamento para este torneo.
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
